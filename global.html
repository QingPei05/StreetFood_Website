<!doctype html>
<html lang="en" data-bs-theme="light">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Global Food — Explore Street Food</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <!-- Shared Auth Gate -->
  <script src="scripts/auth-gate.js"></script>

  <!-- Navbar -->
  <div data-include="partials/navbar.html"></div>

  <!-- Main -->
  <main class="container py-5">
    <h1 class="mb-4">Global Street Food</h1>

    <!-- Continent Filter + Map for Selected -->
    <div class="row g-2 align-items-center mb-3">
      <div class="col-auto">
        <label for="continentFilter" class="col-form-label">Filter by continent:</label>
      </div>
      <div class="col-auto">
        <select id="continentFilter" class="form-select form-select-sm">
          <option value="all">All</option>
          <option value="asia">Asia</option>
          <option value="europe">Europe</option>
          <option value="north-america">North America</option>
          <option value="south-america">South America</option>
          <option value="africa">Africa</option>
          <option value="oceania">Oceania</option>
        </select>
      </div>
      <div class="col-auto">
        <button id="resetFilter" class="btn btn-sm btn-outline-secondary">Reset</button>
      </div>
    </div>

    <div class="row g-4">

      <!-- ===== Asia (Japan / Thailand / China) ===== -->
      <div class="col-md-4" data-continent="asia" id="takoyaki">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/Takoyaki.jpg/500px-Takoyaki.jpg"
            alt="Takoyaki — octopus balls with sauce, mayo and bonito flakes (Japan)">
          <div class="card-body">
            <h5 class="card-title">Takoyaki (Japan)</h5>
            <p class="card-text">Crispy edges, custardy center; finished with sauce, mayo, and dancing bonito flakes.
            </p>
            <button class="btn btn-outline-primary fav-btn" data-food="Takoyaki">Add to favourites</button>
          </div>
        </div>
      </div>

      <div class="col-md-4" data-continent="asia" id="pad-thai">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/Phat_Thai_kung_Chang_Khien_street_stall.jpg/500px-Phat_Thai_kung_Chang_Khien_street_stall.jpg"
            alt="Pad Thai — stir‑fried rice noodles with tamarind, tofu, egg and peanuts (Thailand)">
          <div class="card-body">
            <h5 class="card-title">Pad Thai (Thailand)</h5>
            <p class="card-text">Tamarind-tangy stir‑fried noodles with tofu, egg, beansprouts and crushed peanuts.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Pad Thai">Add to favourites</button>
          </div>
        </div>
      </div>

      <div class="col-md-4" data-continent="asia" id="jianbing">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Jianbing_1.jpg/500px-Jianbing_1.jpg"
            alt="Jianbing — griddled crepe with egg, scallions, crisp cracker and sauces (China)">
          <div class="card-body">
            <h5 class="card-title">Jianbing (China)</h5>
            <p class="card-text">Street-side breakfast crepe: egg, scallions, chili & sweet sauce, plus a crunchy
              cracker.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Jianbing">Add to favourites</button>
          </div>
        </div>
      </div>

      <!-- ===== Europe (Spain / France / Germany) ===== -->
      <div class="col-md-4" data-continent="europe" id="paella">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/ed/01_Paella_Valenciana_original.jpg/500px-01_Paella_Valenciana_original.jpg"
            alt="Paella — saffron rice with seafood or meats, cooked in wide pan (Spain)">
          <div class="card-body">
            <h5 class="card-title">Paella (Spain)</h5>
            <p class="card-text">Saffron‑stained rice simmered with seafood or meats in a wide, shallow pan.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Paella">Add to favourites</button>
          </div>
        </div>
      </div>

      <div class="col-md-4" data-continent="europe" id="crepe">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Cr%C3%AApe_opened_up.jpg/500px-Cr%C3%AApe_opened_up.jpg"
            alt="Crêpe — thin French pancake, sweet or savory (France)">
          <div class="card-body">
            <h5 class="card-title">Crêpe (France)</h5>
            <p class="card-text">Paper‑thin pancakes folded around sweet fillings or savory ham‑cheese combos.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Crêpe">Add to favourites</button>
          </div>
        </div>
      </div>

      <div class="col-md-4" data-continent="europe" id="currywurst">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/20220430_currywurst.jpg/500px-20220430_currywurst.jpg"
            alt="Currywurst — sliced sausage with curried ketchup (Germany)">
          <div class="card-body">
            <h5 class="card-title">Currywurst (Germany)</h5>
            <p class="card-text">Sliced sausage drenched in curried ketchup — Berlin’s street‑food icon.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Currywurst">Add to favourites</button>
          </div>
        </div>
      </div>

      <!-- ===== North America (Mexico / Canada / USA) ===== -->
      <div class="col-md-4" data-continent="north-america" id="tacos">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/73/001_Tacos_de_carnitas%2C_carne_asada_y_al_pastor.jpg/500px-001_Tacos_de_carnitas%2C_carne_asada_y_al_pastor.jpg"
            alt="Tacos — corn tortillas with meat, salsa, onion and cilantro (Mexico)">
          <div class="card-body">
            <h5 class="card-title">Tacos (Mexico)</h5>
            <p class="card-text">Warm corn tortillas, juicy meat, fresh salsa, onion & cilantro. Handheld perfection.
            </p>
            <button class="btn btn-outline-primary fav-btn" data-food="Tacos">Add to favourites</button>
          </div>
        </div>
      </div>

      <div class="col-md-4" data-continent="north-america" id="poutine">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Food_at_WIkimanian_2017_02.jpg/500px-Food_at_WIkimanian_2017_02.jpg"
            alt="Poutine — fries with cheese curds and gravy (Canada)">
          <div class="card-body">
            <h5 class="card-title">Poutine (Canada)</h5>
            <p class="card-text">Crispy fries, squeaky cheese curds, hot gravy — late‑night lifesaver.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Poutine">Add to favourites</button>
          </div>
        </div>
      </div>

      <div class="col-md-4" data-continent="north-america" id="hot-dog">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/07/Hotdogs.JPG/500px-Hotdogs.JPG"
            alt="Hot dog — grilled sausage in a bun with mustard (United States)">
          <div class="card-body">
            <h5 class="card-title">Hot dog (United States)</h5>
            <p class="card-text">Grilled sausage in a soft bun — add mustard, relish, onions as you like.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Hot dog">Add to favourites</button>
          </div>
        </div>
      </div>

      <!-- ===== South America (Venezuela / Argentina / Peru) ===== -->
      <div class="col-md-4" data-continent="south-america" id="arepa">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Arepas_Tradicionales.jpg/500px-Arepas_Tradicionales.jpg"
            alt="Arepa — corn cake stuffed with fillings (Venezuela)">
          <div class="card-body">
            <h5 class="card-title">Arepa (Venezuela)</h5>
            <p class="card-text">Toasty corn cakes split and stuffed — shredded beef, cheese, beans, you name it.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Arepa">Add to favourites</button>
          </div>
        </div>
      </div>

      <div class="col-md-4" data-continent="south-america" id="empanada">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/Empanadas_cordobesas_%28Argentina%29_caseras.JPG/500px-Empanadas_cordobesas_%28Argentina%29_caseras.JPG"
            alt="Empanada — baked/ fried pastry with savory fillings (Argentina)">
          <div class="card-body">
            <h5 class="card-title">Empanada (Argentina)</h5>
            <p class="card-text">Half‑moon pastry, juicy meat or cheese fillings — baked or fried.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Empanada">Add to favourites</button>
          </div>
        </div>
      </div>

      <div class="col-md-4" data-continent="south-america" id="ceviche">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/78/Cebiche_de_corvina.JPG/500px-Cebiche_de_corvina.JPG"
            alt="Ceviche — citrus‑cured fish with chili, onion and cilantro (Peru)">
          <div class="card-body">
            <h5 class="card-title">Ceviche (Peru)</h5>
            <p class="card-text">Fresh fish “cooked” in lime juice, with chili heat and onion bite.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Ceviche">Add to favourites</button>
          </div>
        </div>
      </div>

      <!-- ===== Africa (South Africa / Egypt / Kenya) ===== -->
      <div class="col-md-4" data-continent="africa" id="bunny-chow">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/70/Quarter_Mutton_Bunny_Chow.jpg/375px-Quarter_Mutton_Bunny_Chow.jpg"
            alt="Bunny chow — hollowed bread loaf filled with curry (South Africa)">
          <div class="card-body">
            <h5 class="card-title">Bunny chow (South Africa)</h5>
            <p class="card-text">Bread‑bowl curry from Durban — messy, spicy, very shareable.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Bunny chow">Add to favourites</button>
          </div>
        </div>
      </div>

      <div class="col-md-4" data-continent="africa" id="koshari">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Egyptian_food_Koshary.jpg/500px-Egyptian_food_Koshary.jpg"
            alt="Koshari — rice, macaroni, lentils, chickpeas with tomato sauce and fried onions (Egypt)">
          <div class="card-body">
            <h5 class="card-title">Koshari (Egypt)</h5>
            <p class="card-text">Hearty mix of rice, pasta & lentils, topped with spicy tomato sauce and crispy onions.
            </p>
            <button class="btn btn-outline-primary fav-btn" data-food="Koshari">Add to favourites</button>
          </div>
        </div>
      </div>

      <div class="col-md-4" data-continent="africa" id="mandazi">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/Bowl_of_mandazi.jpg/500px-Bowl_of_mandazi.jpg"
            alt="Mandazi — lightly sweet fried dough (Kenya)">
          <div class="card-body">
            <h5 class="card-title">Mandazi (Kenya)</h5>
            <p class="card-text">Fluffy, lightly sweet fried dough — great with tea or coffee.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Mandazi">Add to favourites</button>
          </div>
        </div>
      </div>

      <!-- ===== Oceania (Australia / New Zealand / Samoa) ===== -->
      <div class="col-md-4" data-continent="oceania" id="meat-pie">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b2/Meat_pie.jpg/500px-Meat_pie.jpg"
            alt="Meat pie — flaky pastry with minced meat and gravy (Australia)">
          <div class="card-body">
            <h5 class="card-title">Meat pie (Australia)</h5>
            <p class="card-text">Hand‑held flaky pastry with savory minced‑meat gravy — stadium classic.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Meat pie">Add to favourites</button>
          </div>
        </div>
      </div>

      <div class="col-md-4" data-continent="oceania" id="pavlova">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/67/Pavlova_dessert.JPG/500px-Pavlova_dessert.JPG"
            alt="Pavlova — meringue dessert with cream and fruit (New Zealand)">
          <div class="card-body">
            <h5 class="card-title">Pavlova (New Zealand)</h5>
            <p class="card-text">Crisp‑shell, marshmallow‑soft meringue topped with whipped cream and fruit.</p>
            <button class="btn btn-outline-primary fav-btn" data-food="Pavlova">Add to favourites</button>
          </div>
        </div>
      </div>

      <div class="col-md-4" data-continent="oceania" id="palusami">
        <div class="card h-100">
          <img class="card-img-top" loading="lazy" decoding="async"
            src="https://upload.wikimedia.org/wikipedia/commons/f/f8/Luaulau.png"
            alt="Palusami — taro leaves baked with coconut milk and fillings (Samoa)">
          <div class="card-body">
            <h5 class="card-title">Palusami (Samoa)</h5>
            <p class="card-text">Taro leaves baked with coconut milk (often with fish or corned beef) — rich & silky.
            </p>
            <button class="btn btn-outline-primary fav-btn" data-food="Palusami">Add to favourites</button>
          </div>
        </div>
      </div>

    </div>
  </main>

  <div data-include="partials/footer.html"></div>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="partials/loader.js"></script>
  <script src="main.js"></script>

  <!-- Favourites -->
  <script>
    // Continent filter + Map buttons
    (function filterAndMap() {
      const select = document.getElementById('continentFilter');
      const reset = document.getElementById('resetFilter');
      const cards = document.querySelectorAll('.row.g-4 > [data-continent]');
      const mapForContinent = document.getElementById('openMapForContinent');

      function apply() {
        const v = (select?.value || 'all').toLowerCase();
        cards.forEach(col => {
          const c = (col.getAttribute('data-continent') || '').toLowerCase();
          col.classList.toggle('d-none', v !== 'all' && c !== v);
        });
        updateMapLink();
      }

      function updateMapLink() {
        const v = (select?.value || 'all');
        const q = v === 'all' ? 'street food around the world' : `${v} street food`;
        if (mapForContinent) { mapForContinent.href = 'map.html?q=' + encodeURIComponent(q); }
      }

      select?.addEventListener('change', apply);
      reset?.addEventListener('click', () => { if (select) { select.value = 'all'; } apply(); });
      apply();

      // Add "View on Map" to each card, passing food & country to map.html
      document.querySelectorAll('.row.g-4 > [data-continent] .card .card-body').forEach(body => {
        const titleFull = body.querySelector('.card-title')?.textContent.trim() || 'Street Food';
        // Parse form: "Takoyaki (Japan)" -> food="Takoyaki", country="Japan"
        const m = titleFull.match(/^(.*?)\s*\(([^)]+)\)\s*$/);
        const food = m ? m[1].trim() : titleFull.trim();
        const country = m ? m[2].trim() : '';

        const btn = document.createElement('button');
        btn.className = 'btn btn-outline-secondary map-btn';
        btn.textContent = 'View on Map';
        btn.addEventListener('click', () => {
          const url = new URL('map.html', location.href);
          url.searchParams.set('food', food);
          if (country) url.searchParams.set('country', country);
          location.href = url.toString();
        });
        const fav = body.querySelector('.fav-btn');
        if (fav) { fav.insertAdjacentElement('afterend', btn); fav.classList.add('me-2'); }
        else { body.appendChild(btn); }
      });
    })();
  </script>
</body>

</html>